pipeline {
    agent any

    parameters {
  string defaultValue: 'main', name: 'branch', trim: true
} 
  
  environment {
  harsh = "${branch}"
              }
 
    stages {
        stage('deploy') {
        
            steps {
           sh "echo harsh"            
 
                  }
         }
    }
        stage('parallel') {
               parallel{
               stage('BUILD') {
               when {
                  branch 'main'
               }
        
                   steps {
                  sh "echo harsh"            
        
                         }
                }
                
        stage('BUILD-test') {
        steps {
       sh "echo harsh"            

              }
     }
    }
}
}